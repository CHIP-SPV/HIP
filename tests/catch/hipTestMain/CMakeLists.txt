if(CMAKE_BUILD_TYPE MATCHES "^Debug$")
    add_definitions(-DHT_LOG_ENABLE)
endif()
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -DTAO_PEGTL_STD_EXPERIMENTAL_FILESYSTEM=1")
add_library(ht_context SHARED EXCLUDE_FROM_ALL hip_test_context.cc)
set_property(TARGET ht_context PROPERTY CXX_STANDARD 17)
target_link_libraries(ht_context PRIVATE stdc++fs)
add_executable(UnitTests EXCLUDE_FROM_ALL main.cc)
target_link_libraries(UnitTests PRIVATE ht_context DeviceLibs MemoryTest Kernels stdc++fs)
catch_discover_tests(UnitTests PROPERTIES  SKIP_REGULAR_EXPRESSION "HIP_SKIP_THIS_TEST")
add_dependencies(build_tests UnitTests)
